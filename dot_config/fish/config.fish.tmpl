## Homebrew paths
fish_add_path /opt/homebrew/bin
fish_add_path /opt/homebrew/sbin
## Cargo paths
fish_add_path /Users/rwblickhan/.cargo/bin
## pnpm paths
fish_add_path /Users/rwblickhan/.local/bin
fish_add_path ~/utils
fish_add_path ~/bin

export AWS_ACCESS_KEY_ID={{ onepasswordRead "op://Private/Cloudflare Backups/access_key_id" }}
export AWS_SECRET_ACCESS_KEY={{ onepasswordRead "op://Private/Cloudflare Backups/secret_access_key" }}

set -gx MANPATH $MANPATH ~/man

# pnpm variables
set -gx PNPM_HOME /Users/rwblickhan/Library/pnpm
set -gx PATH "$PNPM_HOME" $PATH

# fzf variables
# Bind Ctrl-T to toggle-all
set -gx FZF_DEFAULT_OPTS '--bind ctrl-t:toggle-all'
# Use `fd` by default in `fzf` to hide `.gitignore`'d files
set -gx FZF_DEFAULT_COMMAND 'fd --type f --hidden --follow --exclude .git'
set -gx FZF_CTRL_T_COMMAND "$FZF_DEFAULT_COMMAND"
# Show a fancy preview window when using Ctrl+T
set -gx FZF_CTRL_T_OPTS "--preview 'bat --style=numbers --color=always --line-range :500 {}'"

set -gx EDITOR hx
set -gx LEDGER_FILE ~/Developer/finance/2025.journal

{{ if eq .chezmoi.username "rwblickhan" }}
set -gx FULL_INSTALL true
{{ end }}

if command -sq bat
    alias cat bat
end
if command -sq eza
    alias ls "eza --icons"
end
if command -sq delta
    alias diff delta
end
if command -sq batman
    alias man "BAT_THEME='Monokai Extended' batman"
end

if status is-interactive
    if command -sq zoxide
        zoxide init fish --cmd cd | source
    end
    if command -sq starship
        starship init fish | source
    end

    abbr -a a 'git a'
    abbr -a c code
    abbr -a f rfv
    abbr -a g git
    abbr -a h hx
    abbr -a j just
    abbr -a m mise
    abbr -a n nvim
    abbr -a o open
    abbr -a p pnpm
    abbr --set-cursor -a s 'git commit -m "%" && git push'
    abbr -a z zed

    abbr -a --position anywhere r2b s3:{{ onepasswordRead "op://Private/Cloudflare Backups/endpoint" }}

    abbr -a exp expense
    abbr -a bbic "brew bundle install --cleanup --file=~/Brewfile && brew upgrade"
end
